{% extends '@julkaisut/node/node.html.twig' %}

{% block node %}
  <article{{attributes.addClass(classes) }}>
    {% block node__content_wrapper %}
      <div class="node__content">
        <h3{{ title_attributes.addClass('node__title') }}>
          <a href="{{ url }}" data-article-link>{{ label }}</a>
        </h3>

        {% if node.book and node.book.depth == 1 %}
          <div class="published-date">
            <span{{ author_attributes }}>
              <p>{% trans %}Published on {{ date }}{% endtrans %}</p>
            </span>
          </div>

          {{ content|without('search_api_excerpt', 'field_image') }}
        {% else %}
          {% if content.search_api_excerpt is not empty %}
            <p>{{ content.search_api_excerpt }}</p>
          {% else %}
            {{ content|without('search_api_excerpt', 'field_image') }}
          {% endif %}
        {% endif %}


        {% if elements['#children'] %}
          <div class="node__children">
          {% for item in elements['#children'] %}
            <div class="node__child">
            {{ item.content }}
            </div>
          {% endfor %}
          </div>
        {% endif %}
      </div>
    {% endblock %}
  </article>
{% endblock %}
